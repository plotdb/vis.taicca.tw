var obj={len:10,timeDelta:0,scale:{},init:function(){var t,e,r=this;return this.svg=ld$.find("svg",0),this.data=function(){for(var t=[],e=0,r=this.len;e<r;++e)t.push(e);return t}.call(this).map(function(t,e){return{key:e,val:0}}),this.dataset=[0,1,2,3,4,5,6,7,8,9,10].map(function(){return function(){for(var t=[],e=0,r=this.len;e<r;++e)t.push(e);return t}.call(r).map(function(t,e){return{key:e,val:Math.round(1e4*Math.random())}})}),this.scale.x=d3.scaleLinear().range([0,500]).domain([2008,2018]),e=d3.axisBottom(this.scale.x).tickFormat(function(t){return 3e3<=t?numformat(t):t}),(t=d3.select(this.svg).selectAll("g.axis-x").data([1],function(t){return t})).exit().remove(),t.enter().append("g").attr("class","axis-x").attr("transform","translate(0 231)").call(e),(e=d3.select(this.svg).selectAll("circle").data([1],function(t){return t})).exit().remove(),e.enter().append("circle").attr("transform","translate(0 231)").attr("cx",0).attr("cy",0).attr("r",5),(e=d3.select(this.svg).selectAll("rect.mouse").data([1],function(t){return t})).exit().remove(),e.enter().append("rect").attr("class","mouse").attr("transform","translate(0 221)").attr("x",0).attr("y",0).attr("width",500).attr("height",36).attr("fill-opacity",.1).on("mousemove",function(){var t=d3.mouse(ld$.find(r.svg,"rect.mouse",0));return r.timeDelta=10*t[0]/500*1e3}),e},delta:function(t){var n,a,i=this;return null==this.time&&(this.time=t),t=(this.timeDelta+t-this.time)/1e3,n=Math.floor(t),a=t-n,n%=10,this.data.map(function(t,e){var r=i.dataset[n][t.key].val,t=i.dataset[(1+n)%10][t.key].val;return i.data[e].val=(t-r)*a+r}),this.data.sort(function(t,e){return e.val>t.val?1:e.val<t.val?-1:0}),this.data.map(function(t,e){return t.idx!==e&&(null==t.odx&&(t.odx=e),t.idx=e),t.odx=.2*(t.idx-t.odx)+t.odx})},render:function(r){var n=this,t=d3.select(this.svg).selectAll("rect.bar").data(this.data,function(t){return t.key});return t.exit().remove(),t.enter().append("rect").attr("class","bar"),d3.select(svg).selectAll("rect.bar").attr("x",function(t,e){return 0}).attr("y",function(t,e){return 21*t.odx}).attr("width",function(t,e){return 300*t.val/1e4}).attr("height",function(t,e){return 20}).attr("fill",function(){return"#000"}).attr("fill",function(t,e){return d3.interpolateTurbo(t.key/(n.data.length-1))}),d3.select(this.svg).selectAll("circle").attr("cx",function(){var t=(n.timeDelta+r-n.time)/1e3,e=Math.floor(t);return n.scale.x(t-e+2008+e%10)})}},bubble={len:10,timeDelta:0,init:function(){var t=this;return this.svg=ld$.find("svg",0),this.data=function(){for(var t=[],e=0,r=this.len;e<r;++e)t.push(e);return t}.call(this).map(function(t,e){return{key:e,val:0}}),this.dataset=[0,1,2,3,4,5,6,7,8,9,10].map(function(){return function(){for(var t=[],e=0,r=this.len;e<r;++e)t.push(e);return t}.call(t).map(function(t,e){return{key:e,val:Math.round(1e4*Math.random())}})})},delta:function(t){var n,a,i=this;return null==this.time&&(this.time=t),t=(this.timeDelta+t-this.time)/1e3,n=Math.floor(t),a=t-n,n%=10,this.data.map(function(t,e){var r=i.dataset[n][t.key].val,t=i.dataset[(1+n)%10][t.key].val;return i.data[e].val=(t-r)*a+r}),this.data.sort(function(t,e){return e.val>t.val?1:e.val<t.val?-1:0}),this.data.map(function(t,e){return t.idx!==e&&(null==t.odx&&(t.odx=e),t.idx=e),t.odx=.2*(t.idx-t.odx)+t.odx}),this.bubble=d3.pack({children:this.data}).size([500,500]).padding(1.5),t=d3.hierarchy({children:this.data}).sum(function(t){return t.val}),this.dataBubble=this.bubble(t).descendants().filter(function(t){return t.depth})},render:function(){var t=d3.select(this.svg).selectAll("circle.bubble").data(this.dataBubble);return t.exit().remove(),t.enter().append("circle").attr("class","bubble"),d3.select(this.svg).selectAll("circle.bubble").attr("cx",function(t,e){return t.x}).attr("cy",function(t,e){return t.y}).attr("r",function(t,e){return t.r}).attr("fill",function(t,e){return"#000"}).attr("fill-opacity",function(t,e){return.2})}},aniloop={init:function(t){return this.obj=t},handler:function(t){return this.obj.delta(t),this.obj.render(t),requestAnimationFrame(function(t){return aniloop.handler(t)})},run:function(){return requestAnimationFrame(function(t){return aniloop.handler(t)})}};obj.init(),aniloop.init(obj),aniloop.run();