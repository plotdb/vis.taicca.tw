var timeline;function import$(t,e){var i,n={}.hasOwnProperty;for(i in e)n.call(e,i)&&(t[i]=e[i]);return t}(timeline=function(t){return this.aniloop=(t=null==t?{}:t).aniloop,this.inited=!1,this}).prototype=import$(Object.create(Object.prototype),{getTime:function(){return this.time},set:function(t){var i,e=this,n=(i=this).aniloop;return(t=null==t?{}:t).years.sort(function(t,e){return t-e}),this.years=t.years,this.svg=t.svg,this.box=this.svg.getBoundingClientRect(),this.box.size=this.box.width<480?this.box.width:this.box.width/2<480?480:this.box.width/2,this.scale=d3.scaleLinear().range([30,this.box.size-30]).domain([0,this.years.length-1]),this.axis=d3.axisBottom(this.scale).tickFormat(function(t){return t+e.years[0]}),(t=d3.select(this.svg).selectAll("g.timeline").data([1],function(t){return t})).exit().remove(),t.enter().append("g").attr("class","timeline"),d3.select(this.svg).selectAll("g.timeline").attr("transform","translate("+(this.box.width-this.box.size)/2+" "+(this.box.height-30)+")").call(this.axis),(t=d3.select(this.svg).select("g.timeline").selectAll("circle").data([1],function(t){return t})).exit().remove(),t.enter().append("circle").attr("cx",0).attr("cy",0).attr("r",5).attr("fill","#000"),(t=d3.select(this.svg).select("g.timeline").selectAll("rect").data([1],function(t){return t})).exit().remove(),t.enter().append("rect").style("cursor","pointer").attr("x",0).attr("y",-10).attr("width",this.box.size).attr("height",this.box.height).attr("fill","#000").attr("fill-opacity","0").on("mousedown",function(){var t;return i.resumable=n.isRunning(),n.pause(),i.dragging=!0,t=1e3*i.scale.invert(d3.mouse(this)[0]),n.setTime(t),n.render()}),this.inited||(document.addEventListener("mousemove",function(t){var e;if(i.dragging)return e=ld$.find(i.svg,"g.timeline rect",0).getBoundingClientRect(),e=t.clientX-e.x,(e=0<(e=i.scale.invert(e))?e:0)>=i.years.length-1&&(e=i.years.length-1),n.setTime(e*=1e3),n.render()}),document.addEventListener("mouseup",function(){if(i.dragging)return i.dragging=!1,i.resumable||n.setSnap(!0),n.run()})),this.inited=!0},render:function(t){var e=this;return this.rawtime=t,this.time=(t/=1e3)-Math.floor(t)+Math.floor(t)%(this.years.length-1),t&&!this.time&&(this.time=this.years.length-1),d3.select(this.svg).select("g.timeline").selectAll("circle").attr("cx",function(){return e.scale(e.time)})}});