function import$(t,e){var s,i={}.hasOwnProperty;for(s in e)i.call(e,s)&&(t[s]=e[s]);return t}subchart.pie=function(t){return this.host=(t=null==t?{}:t).host,this.svg=t.svg,this.aniloop=t.aniloop,this.timeline=t.timeline,this},subchart.pie.prototype=import$(Object.create(Object.prototype),{hide:function(){return this.svg.classList.toggle("d-none",!0)},prepare:function(){var t,e;return this.svg.classList.toggle("d-none",!1),this.box=this.svg.getBoundingClientRect(),this.values=(t=this.host).values,this.years=t.years,this.valtypes=t.valtypes,this.categories=t.categories,this.pie=d3.pie(),this.pie.value(function(t){return t.val}),this.arc=d3.arc().innerRadius(0).outerRadius(200),this.data=this.categories.filter(function(t){return!("合計"===t)}).map(function(t,e){return{key:t,val:0}}),t=(e=[this.timeline,this.aniloop])[0],(e=e[1]).setObj(this),t.set({years:this.years,svg:this.svg}),e.reset()},delta:function(t){var i=this,t=t/1e3,a=Math.floor(t),r=t-a;return a%=10,this.data.map(function(t,e){var s=+i.values[t.key][a],t=+i.values[t.key][(1+a)%i.years.length];return s=isNaN(s)?0:s,t=isNaN(t)?0:t,i.data[e].val=(t-s)*r+s}),this.data.sort(function(t,e){return e.val>t.val?1:e.val<t.val?-1:0}),this.data.map(function(t,e){return t.idx!==e&&(null==t.odx&&(t.odx=e),t.idx=e),t.odx=.2*(t.idx-t.odx)+t.odx}),this.arcs=this.pie(this.data)},render:function(){var s=this,t=d3.select(this.svg).selectAll("g.pie").data([1],function(t){return t});return t.exit().remove(),(t=t.enter().append("g")).attr("class","pie"),t.attr("transform","translate("+this.box.width/2+","+this.box.height/2+")"),(t=d3.select(this.svg).selectAll("g.pie").selectAll("path.arc").data(this.arcs)).exit().remove(),t.enter().append("path").attr("class","arc"),d3.select(this.svg).selectAll("path.arc").attr("d",this.arc).attr("fill",function(t,e){return s.host.scale.color(t.data.key)})}});