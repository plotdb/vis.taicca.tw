var aniloop,subchart;function import$(t,e){var n,i={}.hasOwnProperty;for(n in e)i.call(e,n)&&(t[n]=e[n]);return t}(aniloop=function(){return this.running=!1,this.time={now:0},this}).prototype=import$(Object.create(Object.prototype),{setObj:function(t){return this.obj=t},reset:function(){return this.time={now:0}},setTimeline:function(t){return this.timeline=t},setTime:function(t,e){return this.time.now=t,this.time.keep=e},getTime:function(){return this.time.now},setSnap:function(t){return this.snap=t},isRunning:function(){return this.running},toggle:function(t){return null!=t&&(this.running=!t),this.running?this.pause():this.run()},pause:function(){return this.running=!1},render:function(){if(this.obj)return this.obj.delta(this.time.now),this.obj.render(this.time.now),this.running&&(this.time.keep=!1),this.timeline.render(this.time.now)},run:function(){var e=this;if(!this.running)return this.running=!0,requestAnimationFrame(function(t){return e.handler(e.time.last=t)})},handler:function(t){var e,n=this;if(this.running)return this.snap?(e=t-(null==this.time.last?t:this.time.last),this.time.now=this.time.now+2*e*(500<this.time.now%1e3?1:-1),this.time.now%1e3<150&&(this.time.now=this.time.now-this.time.now%1e3,this.snap=!1,this.time.keep=!0,this.pause())):this.time.now+=t-(null==this.time.last?t:this.time.last),this.time.last=t,this.render(),requestAnimationFrame(function(t){return n.handler(t)})},oldHandler:function(t){var e=this;return this.time||(this.time=t),this.obj&&(this.obj.delta(t-this.time),this.obj.render(t-this.time),this.timeline.render(t-this.time)),requestAnimationFrame(function(t){return e.handler(t)})}}),aniloop.main=new aniloop,aniloop.main.run(),subchart={interface:{chartInfo:function(e,t){var n=this,i="left"===(t=null==t?"left":t)?{anchor:"start",x:100}:{anchor:"end",x:this.box.width-100};return(t=d3.select(this.svg).selectAll("text.year").data([1],function(t){return t})).exit().remove(),t.enter().append("text").attr("class","year"),d3.select(this.svg).selectAll("text.year").text(function(){var t=Math.floor(e/1e3)%(n.years.length-1);return aniloop.main.time.keep&&!t&&0<e&&(t=n.years.length-1),n.years[t]}).attr("font-size","3em").attr("x",i.x).attr("y",this.box.height-100).attr("dy","-1.25em").attr("text-anchor",i.anchor),(t=d3.select(this.svg).selectAll("text.title").data([1],function(t){return t})).exit().remove(),t.enter().append("text").attr("class","title"),d3.select(this.svg).selectAll("text.title").text(function(){return n.host.cattype+"年度"+n.host.valtype}).attr("font-size","1.5em").attr("x",i.x).attr("y",this.box.height-100).attr("dy","-1.2em").attr("text-anchor",i.anchor),(t=d3.select(this.svg).selectAll("text.unit").data([1],function(t){return t})).exit().remove(),t.enter().append("text").attr("class","unit"),d3.select(this.svg).selectAll("text.unit").text("單位: "+this.host.unit).attr("x",i.x).attr("y",this.box.height-100).attr("text-anchor",i.anchor)}}};