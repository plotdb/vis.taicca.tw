<div><script type="@plotdb/block">(function(it){
  return it();
})(function(){
  var blockFactory, mod;
  blockFactory = {
    pkg: {
      name: 'wordcloud',
      version: '0.0.1',
      extend: {
        name: "base",
        version: "0.0.1"
      },
      dependencies: [{
        url: "https://unpkg.com/d3-cloud@1.2.5/build/d3.layout.cloud.js"
      }]
    },
    init: function(arg$){
      var root, context, pubsub;
      root = arg$.root, context = arg$.context, pubsub = arg$.pubsub;
      return pubsub.fire('init', {
        mod: mod({
          context: context
        })
      }).then(function(it){
        return it[0];
      });
    }
  };
  mod = function(arg$){
    var context, root, d3, forceBoundary, ldColor, repeatString$;
    context = arg$.context, root = arg$.root;
    d3 = context.d3, forceBoundary = context.forceBoundary, ldColor = context.ldColor, repeatString$ = context.repeatString$;
    return {
      sample: function(){
        return {
          raw: [],
          binding: {}
        };
      },
      config: {},
      dimension: {},
      init: function(){
        var this$ = this;
        this.dd = ['cover', 'scandal', 'seem', 'consumption', 'garbage', 'hunter', 'pepper', 'west', 'guilt', 'conspiracy', 'pupil', 'boat', 'muscle', 'nightmare', 'gene', 'royalty', 'salon', 'difficult', 'management', 'brainstorm', 'aid', 'moving', 'plaster', 'cake', 'issue', 'realism', 'subject', 'speed', 'railcar', 'break', 'grass', 'collapse', 'is', 'leave', 'retiree', 'looting', 'transaction', 'copyright', 'serve', 'guard', 'colony', 'spell', 'ask', 'ranch', 'cell', 'sensation', 'name', 'default', 'reflection'].map(function(d, i){
          return {
            text: d,
            value: 1.5 * i + 10
          };
        });
        this.cloud = d3.layout.cloud();
        return this.cloud.font('arial').padding(2).fontSize(function(it){
          return it.value;
        }).on('end', function(){
          return this$.render();
        });
      },
      parse: function(){},
      resize: function(){
        return this.cloud.size([this.box.width, this.box.height].map(function(it){
          return Math.round(it);
        })).words(this.dd).start();
      },
      render: function(){
        var color, vext, vscale, x$, this$ = this;
        color = d3.interpolateTurbo;
        if (this.cfg != null && this.cfg.pal) {
          color = d3.interpolateDiscrete(this.cfg.pal.colors.map(function(it){
            return ldColor.web(it.value || it);
          }));
        }
        vext = d3.extent(this.dd.map(function(it){
          return it.value;
        }));
        vscale = d3.scaleLinear().domain(vext).range([0, 1]);
        x$ = d3.select(this.svg).selectAll('text').data(this.dd);
        x$.exit().remove();
        x$.enter().append('text');
        return d3.select(this.svg).selectAll('text').attr('transform', function(it){
          return "translate(" + (it.x + this$.box.width / 2) + " " + (it.y + this$.box.height / 2) + ") rotate(" + it.rotate + ")";
        }).attr('text-anchor', 'middle').attr('font-size', function(it){
          return it.size;
        }).attr('font-family', 'arial').attr('fill', function(it){
          return color(vscale(it.value));
        }).text(function(it){
          return it.text;
        });
      },
      tick: function(){}
    };
  };
  return blockFactory;
});</script></div>