<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[{name:"ldslider",version:"main",path:"index.min.css"},{name:"ldslider",version:"main",path:"index.min.js"}],i18n:{en:{unit:"Unit"},"zh-TW":{unit:"單位"}}},init:function(n){var t,e,i,r,u,a,o,l,d,f,s,c=this;t=n.root,e=n.context,i=n.data,r=n.pubsub;u=e.ldview,a=e.ldslider;o={};this._meta={};l=function(n){var t;n==null&&(n={});t=o.ldrs.get()+""+o.unit;if(!n.init&&t!==o.v){r.fire("event","change",t)}return o.v=t};d=function(n){var t,e;n==null&&(n={});t=import$({},n.unit);o.unit=t.name;if(t.from!=null){console.warn("[@plotdb/konfig] ctrl should use `default` for default value.\nplease update your config to comply with it.")}if(t["default"]!=null){t.from=t["default"]}o.ldrs.setConfig((e=Object.fromEntries(["min","max","step","from","to","exp","limitMax","range","label"].map(function(n){return[n,t[n]]}).filter(function(n){return n[1]!=null})),e.unit=t.name||"",e));l({init:n.init});return s.render()};f=function(n){var t;n==null&&(n={});c._meta=t=JSON.parse(JSON.stringify(n.meta||{}));return d({unit:t.units[0],init:n.init})};r.fire("init",{get:function(){return o.ldrs.get()+""+o.unit},set:function(n){var t;t=/^(\d+(?:\.(\d+))?)(\D*)/.exec(n+"");if(!t){t=/^(\d+(?:\.(\d+))?)(\D*)/.exec(this["default"]()+"")}if(!t){t=[0,0,this._meta.units[0]]}o.ldrs.set(+t[1]);return o.unit=t[2]},default:function(){return c._meta["default"]},meta:function(n){return f({meta:n})},render:function(){return o.ldrs.update()}});s=new u({root:t,initRender:false,action:{click:{switch:function(){return o.ldrs.edit()}}},init:{ldrs:function(n){var t;t=n.node;o.root=t;o.ldrs=new a({root:t});return o.ldrs.on("change",function(){return l()})}},text:{picked:function(){return o.unit}},handler:{unit:{list:function(){return c._meta.units},key:function(n){return n.name},action:{click:function(n){var t;t=n.data;return d({unit:t})}},text:function(n){var t;t=n.data;return t.name}}}});return s.init().then(function(){return f({meta:i,init:true})})}};function import$(n,t){var e={}.hasOwnProperty;for(var i in t)if(e.call(t,i))n[i]=t[i];return n}</script></div>
