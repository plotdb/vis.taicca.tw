!function(){var c;function m(t,e){var n,i={}.hasOwnProperty;for(n in e)i.call(e,n)&&(t[n]=e[n]);return t}(c=function(t){var n=this;return this.root="string"==typeof(t=null==t?{}:t).root?document.querySelector(t.root):t.root,this.opt=t,this.evtHandler={},this.useBundle=null==t.useBundle||t.useBundle,this.view=t.view,this.autotab=t.autotab||!1,this._ctrlobj={},this._ctrllist=[],this._tabobj={},this._tablist=[],this._template=null,this._meta=t.meta||{},this._tab=t.tab||{},this._val={},this._obj={},this._objps=[],this.typemap=t.typemap||null,this.mgr=this.mgrChain=new block.manager({registry:function(t){var e=t.name,n=t.version,t=t.path;throw new Error("@plotdb/konfig: "+e+"@"+n+"/"+t+" is not supported")}}),t.manager&&(this.mgr=t.manager,this.mgr.chain(this.mgrChain)),this.init=proxise.once(function(){return n._init()},function(){return n._val}),this._updateDebounced=debounce(150,function(t,e){return n._update(t,e)}),this.doDebounce=!(null!=t.debounce)||t.debounce,this.update=function(t,e){return n.doDebounce?n._updateDebounced(t,e):n._update(t,e)},this}).views={simple:function(){var t=this;return new ldview({root:this.root,initRender:!1,handler:{ctrl:{list:function(){return t._ctrllist.filter(function(t){return!t.meta.hidden})},key:function(t){return t.key},init:function(t){var e=t.node,t=t.data;return e.appendChild(t.root)}}}})},default:function(){var n=this;return new ldview({root:this.root,initRender:!1,handler:{tab:{list:function(){return n._tablist.sort(function(t,e){return e.tab.order-t.tab.order}),n._tablist},key:function(t){return t.key},view:{text:{name:function(t){return t.ctx.tab.id}},handler:{ctrl:{list:function(t){var e=t.ctx;return n._ctrllist.filter(function(t){return t.meta.tab===e.tab.id&&!t.meta.hidden})},key:function(t){return t.key},init:function(t){var e=t.node,t=t.data;return e.appendChild(t.root)},handler:function(t){t.node;return t.data.itf.render()}}}}}}})},recurse:function(){var t,e,n=this;return this._template?t=this._template:((t=ld$.find(this.root,"[ld=template]",0)).parentNode.removeChild(t),t.removeAttribute("ld-scope"),this._template=t),t=t.cloneNode(!0),new ldview(m({ctx:{tab:{id:null}}},m(e={},{template:t,root:this.root,initRender:!1,text:{name:function(t){t=t.ctx;return t.tab?(t.tab.name||"")+"":""}},handler:{tab:{list:function(t){var e=t.ctx,t=n._tablist.filter(function(t){return!(t.tab.parent.tab.id||e.tab.id)||t.tab.parent&&e.tab&&t.tab.parent.tab.id===e.tab.id});return t.sort(function(t,e){return e.tab.order-t.tab.order}),t},key:function(t){return t.key},view:e},ctrl:{list:function(t){var e=t.ctx;return n._ctrllist.filter(function(t){return!!e.tab&&(t.meta.tab===e.tab.id&&!t.meta.hidden)})},key:function(t){return t.key},init:function(t){var e=t.node,t=t.data;return e.appendChild(t.root)},handler:function(t){var e=t.node,t=t.data;return e.style.flex="1 1 "+16*(t.meta.weight||1)+"%",t.itf.render()}}}})))}},c.prototype=m(Object.create(Object.prototype),{on:function(t,e){var n;return((n=this.evtHandler)[t]||(n[t]=[])).push(e)},fire:function(t){for(var e,n,i,r,a=[],o=[],u=1,l=arguments.length;u<l;++u)o.push(arguments[u]);for(e=o,u=0,i=(n=this.evtHandler[t]||[]).length;u<i;++u)r=n[u],a.push(r.apply(this,e));return a},render:function(t){if(null==t&&(t=!1),this.view)return this._view&&!0!==t||("string"==typeof this.view?this._view=this._view||c.views[this.view].apply(this):"function"==typeof this.view?(t={root:this.root,ctrls:this._ctrllist,tabs:this._tablist},this._view=this.view.apply(t,[t])):(this._view=this.view,this._view.ctx({root:this.root,ctrls:this._ctrllist,tabs:this._tablist}))),this._view.render()},meta:function(t){var e,n,i;return null==t&&(t={}),e=(t=JSON.parse(JSON.stringify(t))).meta,n=t.tab,i=t.config,this._meta={},this._tab={},null==e||"string"==typeof e.type?(this._meta=t,this.build(!0)):(null!=e&&(this._meta=e),null!=n&&(this._tab=n),this.build(!0,i))},default:function(){var t,l=function(t,e,n,i){var r,a,o,u=[];for(a in null==e&&(e={}),null==n&&(n={}),r=t.child||t)(o=r[a]).type?u.push(e[a]=n[a].itf.default()):u.push(l(o,e[a]||(e[a]={}),n[a]||(n[a]={})));return u};return l(this._meta,t={},this._ctrlobj),t},get:function(){return JSON.parse(JSON.stringify(this._val))},_objwait:function(t){if(this._objps.push(t),!(this._objps.length<100))return t=this._objps.splice(0),this._objps.push(Promise.all(t))},obj:function(){var t=this;return Promise.all(this._objps).then(function(){return t._objps.splice(0),t._obj})},set:function(t,s){var c,f=this;return null==s&&(s={}),t=JSON.parse(JSON.stringify(t)),this.render(),(c=function(t,n,i,e,r,a){var o,u,l,d=[];for(u in null==n&&(n={}),null==i&&(i={}),null==e&&(e={}),null==r&&(r={}),o=t.child||t)(l=o[u]).type?n[u]===e[u]||s.append&&null==e[u]||(n[u]=e[u],r[u].itf.set(n[u]),d.push(function(e){return f._objwait(r[e].itf.object(n[e]).then(function(t){return i[e]=t}))}(u))):d.push(c(l,n[u]||(n[u]={}),i[u]||(i[u]={}),e[u]||(e[u]={}),r[u]||(r[u]={}),u));return d})(this._meta,this._val,this._obj,t,this._ctrlobj,null)},_update:function(t,e){return this.fire("change",JSON.parse(JSON.stringify(this._val)),t,e)},_init:function(){var e=this;return this.mgr.init().then(function(){return e.useBundle&&c.bundle||[]}).then(function(t){return e.mgr.set(t.map(function(t){return new block.class((t.manager=e.mgr,t))}))}).then(function(){return e.build()}).then(function(){return e._val})},_prepareTab:function(t){var e;return this._tabobj[t.id]?((e=this._tabobj[t.id].tab).depth<t.depth&&(e.tab=t),e):(e=document.createElement("div"),this._tablist.push(e={root:e,tab:t,ctrls:[],tabs:[],key:"tabkey-"+this._tablist.length+"-"+Math.random().toString(36).substring(2)}),this._tabobj[t.id]=e)},interface:function(e){var t,n,i,r,a=this,o=e.block?(t=(r={name:(r=e.block).name,version:r.version,path:r.path}).name,n=r.version,r.path):this.typemap&&(o=this.typemap(e.type))?(i=o.ns,t=o.name,n=o.version,o.path):(i=(r=["",e.type,c.version,""])[0],t=r[1],n=r[2],r[3]),u=block.id({ns:i,name:t,version:n,path:o});return(r=(this._lib||(this._lib={}))[u])?Promise.resolve(r):this.mgr.get({ns:i,name:t,version:n,path:o}).then(function(t){return t.create({data:e})}).then(function(t){return t.attach().then(function(){return t.interface()})}).then(function(t){return a._lib[u]=t=null==t?{}:t})},_prepareCtrl:function(i,n,r,a){var t,e,o,u,l,d=this,s=i.id;return a[s]?Promise.resolve():(u=i.block?(e=(t={name:(t=i.block).name,version:t.version,path:t.path}).name,o=t.version,t.path):this.typemap&&(u=this.typemap(i.type))?(l=u.ns,e=u.name,o=u.version,u.path):(l=(t=["",i.type,c.version,""])[0],e=t[1],o=t[2],t[3]),this.mgr.get({ns:l,name:e,version:o,path:u}).then(function(t){return t.create({data:i})}).then(function(t){var e,n=document.createElement("div");return null==i.tab&&(i.tab="default"),e=d._tabobj[i.tab]||d._prepareTab({id:i.tab,name:i.tab,depth:0,parent:{tab:{}}}),d._ctrllist.push(a[s]={block:t,meta:i,root:n,key:"ctrlkey-"+d._ctrllist.length+"-"+Math.random().toString(36).substring(2)}),e.ctrls.push(a[s]),t.attach({root:n,defer:!0}).then(function(){return t.interface()}).then(function(t){return a[s].itf=t})}).then(function(e){var t;return n[s]=t=e.get(),d._objwait(e.object(t).then(function(t){return r[s]=t})),e.on("change",function(t){return n[s]=t,d._objwait(e.object(t).then(function(t){return r[s]=t})),d.update(s,t)})}).then(function(){return a[s]}))},build:function(t,e){var n=this;return null==t&&(t=!1),this._buildTab(t),this._buildCtrl(t).then(function(){return n._ctrllist.map(function(t){return t.block.attach()})}).then(function(){return n.render(t)}).then(function(){if(null!=e)return n.set(e)}).then(function(){return n.update()})},_buildCtrl:function(t){var f=this,p=[],h=function(t,e,n,i,r,a){var o,u,l,d,s,c=[];if(null==e&&(e={}),null==n&&(n={}),null==i&&(i={}),t&&"object"==typeof t&&(o=t.child||t,!(u=t.child?t.tab:null)&&f.autotab&&r&&(u="tabid-"+f._tablist.length+"-"+Math.random().toString(36).substring(2),l=f._prepareTab({id:u,name:r,depth:a?a.tab.depth+1:0,parent:a||{tab:{}}}),a&&a.tabs.push(l)),o)){for(d in o)(s=o[d]).type?(m((s.id=d,s),u&&!s.tab?{tab:u}:{}),p.push(f._prepareCtrl(s,e,n,i))):c.push(h(s,e[d]||(e[d]={}),n[d]||(n[d]={}),i[d]||(i[d]={}),d,l));return c}};return(t=null==t?!1:t)&&this._ctrllist&&this._ctrllist.map(function(t){var e=t.block,t=t.root;if(e.destroy&&e.destroy(),t.parentNode)return t.parentNode.removeChild(t)}),!t&&this._val||(this._val={},this._obj={}),!t&&this._ctrlobj||(this._ctrlobj={}),!t&&this._ctrllist||(this._ctrllist=[]),h(this._meta,this._val,this._obj,this._ctrlobj,null),Promise.all(p)},_buildTab:function(t){var c,f=this;if(null==t&&(t=!1),"ctrl"!==this.renderMode)return t&&this._tablist&&this._tablist.map(function(t){t=t.root;if(t.parentNode)return t.parentNode.removeChild(t)}),!t&&this._tablist||(this._tablist=[]),!t&&this._tab||(this._tab={}),t&&(this._tabobj={}),(c=function(n,t,e){var i,r,a,o,u,l,d,s=[];if(null==t&&(t=0),null==e&&(e={tab:{}}),n&&(Array.isArray(n)||"object"==typeof n)){for(o=0,u=(i=Array.isArray(n)?n:function(){var t,e=[];for(r in t=n)a=t[r],e.push({id:r,v:a});return e}().map(function(t,e){var n=t.id,t=t.v;return t.id=n,t})).length;o<u;++o)m(((l=i[d=o]).depth=t,l.parent=e,l),a.name?{}:{name:l.id}),m(l,null==a.order?{order:d}:{}),d=f._prepareTab(l),s.push(c(l.child,(l.depth||0)+1,d));return s}})(this._tab)}}),c.merge=function(t){var e,n,i,r,o,a;for(null==t&&(t={}),n=[],i=1,r=arguments.length;i<r;++i)n.push(arguments[i]);for(o=function(t,e){var n,i,r,a=(n=[(t=null==t?{}:t).child||t,(e=null==e?{}:e).child||e])[0];for(r in i=n[1])i[r].type||a[r]&&a[r].type?a[r]?a[r]&&m(a[r],e[r]):a[r]=e[r]:a[r]=o(a[r],i[r]);return t},i=0,r=(e=n).length;i<r;++i)a=i,t=o(t,JSON.parse(JSON.stringify(e[a])));return t},c.append=function(){for(var t,a,e,n,i=[],r=0,o=arguments.length;r<o;++r)i.push(arguments[r]);for(a=function(t,e){var n,i,r=[];for(n in e)"object"==typeof(i=e[n])&&(t[n],a(t[n],i)),r.push(t[n]=i);return r},r=(t=i).length-2;0<=r;--r)e=r,e=[JSON.parse(JSON.stringify(t[e])),t[e+1]],a(n=e[0],e[1]);return n},c.version="main","undefined"!=typeof module&&null!==module?module.exports=c:"undefined"!=typeof window&&null!==window&&(window.konfig=c),c.bundle=(c.bundle||[]).concat([{name:"@plotdb/konfig.widget.default",version:"main",path:"base",code:'<div><div class="d-flex"><div class="flex-grow-1 d-flex align-items-center"><div ld="name"></div><div ld="hint">?</div></div><plug name="ctrl"></plug></div><plug name="config"></plug><style type="text/css">[ld=hint]{margin-left:.5em;width:1.2em;height:1.2em;border-radius:50%;background:rgba(0,0,0,0.1);font-size:10px;line-height:1.1em;text-align:center;cursor:pointer}</style><script type="@plotdb/block">module.exports={pkg:{dependencies:[{name:"@loadingio/vscroll",version:"main",path:"index.min.js"},{name:"@loadingio/debounce.js",version:"main",path:"index.min.js"},{name:"ldview",version:"main",path:"index.min.js"},{name:"ldcover",version:"main",path:"index.min.js"},{name:"ldcover",version:"main",path:"index.min.css"},{name:"ldloader",version:"main",path:"index.min.js"},{name:"ldloader",version:"main",path:"index.min.css",global:true},{name:"zmgr",version:"main",path:"index.min.js"}]},init:function(n){var e,t,i,r,a,o,u,m,d,s,l=this;e=n.root,t=n.context,i=n.data,r=n.pubsub,a=n.t;this._meta=i;o=t.ldcover,u=t.ldloader,m=t.zmgr;d=new m;o.zmgr(d);u.zmgr(d);r.on("init",function(n){var e;n==null&&(n={});l.itf=e={evtHandler:{},get:n.get||function(){},set:n.set||function(){},meta:n.meta||function(n){return l._meta=n},default:n["default"]||function(){return l._meta["default"]},object:n.object||function(n){return Promise.resolve(n)},render:function(){s.render();if(n.render){return n.render()}},on:function(n,t){var i=this;return(Array.isArray(n)?n:[n]).map(function(n){var e;return((e=i.evtHandler)[n]||(e[n]=[])).push(t)})},fire:function(n){var e,t,i,r,a,o,u,m=[];t=[];for(i=1,r=arguments.length;i<r;++i){t.push(arguments[i])}e=t;for(i=0,o=(a=this.evtHandler[n]||[]).length;i<o;++i){u=a[i];m.push(u.apply(this,e))}return m}};if(s){return s.render("hint")}});r.on("event",function(n){var e,t,i,r;t=[];for(i=1,r=arguments.length;i<r;++i){t.push(arguments[i])}e=t;return l.itf.fire.apply(l.itf,[n].concat(e))});if(!e){return}return s=new ldview({root:e,text:{name:function(){return a(l._meta.name||l._meta.id||"")}},handler:{hint:function(n){var e;e=n.node;return e.classList.toggle("d-none",!l._meta.hint)}},action:{click:{hint:function(){return alert(a(l._meta.hint||"no hint"))}}}})},interface:function(){return this.itf}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"boolean",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[{name:"ldview",version:"main",path:"index.min.js"}]},init:function(t){var e,n,a,i,r,u,s;e=t.root,n=t.context,a=t.pubsub,i=t.data;r=n.ldview;u={default:i["default"],state:i["default"]||false};a.fire("init",{get:function(){return u.state},set:function(t){u.state=!!t;return s.render("switch")},default:function(){return u["default"]},meta:function(t){return u["default"]=t["default"]}});return s=new r({root:e,action:{click:{switch:function(){u.state=!u.state;s.render("switch");return a.fire("event","change",u.state)}}},handler:{switch:function(t){var e;e=t.node;return e.classList.toggle("on",u.state)}}})}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"button",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[],i18n:{"zh-TW":{config:"設定"}}},init:function(t){var e,n,a,u,r,i,o,d,f;e=t.root,n=t.context,a=t.data,u=t.pubsub,r=t.t;i=n.ldview,o=n.ldcolor;d={data:a["default"],default:a["default"]};u.fire("init",{get:function(){return d.data},set:function(t){return d.data=t},default:function(){return d["default"]},meta:function(t){return d.data=d["default"]=t["default"]}});return f=new i({root:e,action:{click:{button:function(){return Promise.resolve(a.cb(d.data)).then(function(t){if(d.data===t){return}return u.fire("event","change",d.data=t)})}}},text:{button:function(){return a.text||"..."}}})}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"choice",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[]},init:function(e){var t,n,a,r,u,i,o=this;t=e.root,n=e.context,a=e.data,r=e.pubsub;this._meta=a;u=n.ldview;r.fire("init",{get:function(){return i.get("select").value},set:function(e){return i.get("select").value=e},default:function(){return o._meta["default"]},meta:function(e){return o._meta=e}});return i=new u({root:t,action:{change:{select:function(e){var t;t=e.node;return r.fire("event","change",t.value)}}},handler:{option:{list:function(){return o._meta.values},key:function(e){return e},init:function(e){var t,n;t=e.node,n=e.data;if(o._meta["default"]===n){return t.setAttribute("selected","selected")}},handler:function(e){var t,n;t=e.node,n=e.data;t.setAttribute("value",n);return t.textContent=n}}}})}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"color",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[{name:"ldcolor",version:"main",path:"index.min.js",async:false},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.js"},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.css",global:true}]},init:function(e){var t,n,r,o,a,i,l,c,u=this;t=e.root,n=e.context,r=e.pubsub,o=e.data;a=n.ldview,i=n.ldcolor,l=n.ldcolorpicker;this._meta=o;this.render=function(){r.fire("render");if(typeof c!="undefined"&&c!==null){return c.render()}};this.set=function(e){this.c=e;if(!(e==="currentColor"||e==="transparent")){this.ldcp.setColor(e)}return this.render()};this.prepareDefault=function(e){var t;e==null&&(e={});this["default"]=(t=e.data["default"])==="currentColor"||t==="transparent"?e.data["default"]:i.web(e.data["default"]||this.ldcp.getColor());if(e.overwrite){return this.set(this["default"])}};r.fire("init",{get:function(){return u.c},set:function(e){return u.set(e)},default:function(){return u["default"]},meta:function(e){u._meta=e;u.ldcp.setPalette(e.palette);if(e.idx!=null){u.ldcp.setIdx(e.idx)}return u.prepareDefault({overwrite:true,data:e})}});this.ldcp=new l(t.querySelector("[ld~=input]"),{className:"round shadow-sm round flat compact-palette no-button no-empty-color vertical",palette:(o["default"]?[o["default"]]:[]).filter(function(e){return!(e==="transparent"||e==="currentColor")}).concat(o.palette||["#cc0505","#f5b70f","#9bcc31","#089ccc"]),context:o.context||"random",exclusive:o.exclusive!=null?o.exclusive:true});this.prepareDefault({overwrite:true,data:o});c=new a({root:t,action:{keyup:{input:function(e){var t,n,r;t=e.node,n=e.ctx,r=e.evt;if(r.keyCode===13){u.ldcp.setColor(t.value);return u.c=t.value}}},click:{default:function(e){var t,n;t=e.node,n=e.ctx;u.c="currentColor";r.fire("event","change",u.c);return u.render()}}},handler:{color:function(e){var t,n,r;t=e.node,n=e.ctx;r=i.web(u.c);if(t.nodeName.toLowerCase()==="input"){return t.value=r}else{return t.style.backgroundColor=r}}}});return this.ldcp.on("change",function(e){u.c=i.web(e);r.fire("event","change",u.c);return u.render()})}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"font",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[{name:"@xlfont/load",version:"main",path:"index.min.js"},{name:"@xlfont/choose",version:"main",path:"index.min.js"},{name:"@xlfont/choose",version:"main",path:"index.min.css",global:true}],i18n:{en:{default:"Default"},"zh-TW":{"system default":"預設字型"}}},init:function(e){var n,t,o,r,i,a,f,l,u,s,d;n=e.root,t=e.context,o=e.data,r=e.pubsub,i=e.t;a=t.ldview,f=t.ldcover,l=t.xfc;u={font:null};r.fire("init",{get:function(){var e;if(u.font){return{name:(e=u.font).name,style:e.style,weight:e.weight}}else{return this["default"]()}},set:function(e){u.font=!e?e:typeof e==="string"?{name:e}:{name:e.name,style:e.style,weight:e.weight};return d.render("font-name")},default:function(){if(typeof u._m["default"]==="string"){return{name:u._m["default"]}}else{return u._m["default"]}},meta:function(e){return u._meta=e},object:function(e){return s.load(e)}});u._m=o;s=new l({root:!n?null:n.querySelector(".ldcv"),initRender:true,meta:"https://xlfont.maketext.io/meta",links:"https://xlfont.maketext.io/links"});s.init();if(!n){return}s.on("choose",function(e){return u.ldcv.set(e)});return d=new a({root:n,init:{ldcv:function(e){var n;n=e.node;u.ldcv=new f({root:n,inPlace:false});return u.ldcv.on("toggle.on",function(){return debounce(50).then(function(){return s.render()})})}},action:{click:{system:function(e){var n,t;n=e.node;u.font=t=null;d.render("font-name");return r.fire("event","change",t)},button:function(e){var n;n=e.node;return u.ldcv.get().then(function(e){u.font=e?{name:e.name,style:e.style,weight:e.weight}:null;d.render("font-name");return r.fire("event","change",u.font)})}}},handler:{"font-name":function(e){var t,n;t=e.node;n=!u.font?i("default"):u.font.name||i("default");if(n.length>10){n=n.substring(0,10)+"..."}t.innerText=n;return Promise.resolve(u.font?s.load(u.font):u.font).then(function(e){var n;return t.setAttribute("class",(n=e&&e.className)?n:"")})}}})}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"number",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[{name:"ldslider",version:"main",path:"index.min.css"},{name:"ldslider",version:"main",path:"index.min.js"}]},init:function(t){var e,n,r,i,o,l,u,a,f,d=this;e=t.root,n=t.context,r=t.data,i=t.pubsub;o=n.ldview,l=n.ldslider;u={};this._meta={};a=function(t){if(t.from!=null){console.warn("[@plotdb/konfig] ctrl should use `default` for default value.\\nplease update your config to comply with it.")}if(t["default"]!=null){if(typeof t["default"]==="object"){import$(t,t["default"])}else if(typeof t["default"]==="number"){t.from=t["default"]}}return d._meta=JSON.parse(JSON.stringify(t))};i.fire("init",{get:function(){return u.ldrs.get()},set:function(t){return u.ldrs.set(t)},default:function(){return d._meta["default"]},meta:function(t){a(t);return u.ldrs.setConfig(Object.fromEntries(["min","max","step","from","to","exp","limitMax","range","label"].map(function(t){return[t,d._meta[t]]}).filter(function(t){return t[1]!=null})))},render:function(){return u.ldrs.update()}});a(r);return f=new o({root:e,action:{click:{switch:function(){return u.ldrs.edit()}}},init:{ldrs:function(t){var e;e=t.node;u.root=e;u.ldrs=new l(import$({root:e},Object.fromEntries(["min","max","step","from","to","exp","limitMax","range","label"].map(function(t){return[t,d._meta[t]]}).filter(function(t){return t[1]!=null}))));return u.ldrs.on("change",function(t){return i.fire("event","change",t)})}}})}};function import$(t,e){var n={}.hasOwnProperty;for(var r in e)if(n.call(e,r))t[r]=e[r];return t}<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"palette",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[{name:"ldbutton",version:"main",path:"index.min.css",global:true},{name:"ldcolor",version:"main",path:"index.min.js",async:false},{name:"ldslider",version:"main",path:"index.min.js",async:false},{name:"ldslider",version:"main",path:"index.min.css",global:true},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.js",async:false},{name:"@loadingio/ldcolorpicker",version:"main",path:"index.min.css"},{name:"@loadingio/vscroll",version:"main",path:"index.min.js"},{name:"ldpalettepicker",version:"main",path:"index.min.css",global:true},{name:"ldpalettepicker",version:"main",path:"index.min.js"}]},init:function(e){var n,t,a,r,l,i,o,s,d,p,u,c;n=e.root,t=e.context,a=e.pubsub,r=e.data,l=e.i18n,i=e.manager;o=t.ldview,s=t.ldcolor,d=t.ldpp,p=t.ldcover;u={default:r["default"]||d.defaultPalette,pal:r["default"]||d.defaultPalette};a.fire("init",{get:function(){return u.pal},set:function(e){u.pal=e;return c.render()},default:function(){return u["default"]},meta:function(e){return u["default"]=e["default"]||d.defaultPalette}});n=ld$.find(n,"[plug=config]",0);c=new o({root:n,action:{click:{ldp:function(){return Promise.resolve().then(function(){var e,n;if(u.ldpp){return}e=Array.isArray(r.palettes)?r.palettes:typeof r.palettes==="string"?d.get(r.palettes):null;n=e?Promise.resolve(e):i.rescope.load([{name:"ldpalettepicker",version:"main",path:"index.min.js",async:false},{name:"ldpalettepicker",version:"main",path:"all.palettes.js"}]).then(function(e){var n;n=e.ldpp;return n.get("all")});return n.then(function(e){return u.ldpp=new d({root:c.get("ldcv"),ldcv:{inPlace:false},useClusterizejs:true,i18n:l,palette:r.palette,palettes:e,useVscroll:true})})}).then(function(){return u.ldpp.get()}).then(function(e){if(!e){return}u.pal=e;c.render("color");return a.fire("event","change",u.pal)})}}},handler:{color:{list:function(){var e;return((e=u.pal||(u.pal={})).colors||(e.colors=[])).map(function(e,n){return import$({_idx:n},s.hsl(e))})},key:function(e){return e._idx},handler:function(e){var n,t;n=e.node,t=e.data;return n.style.backgroundColor=s.web(t)}}}});return c.render()}};function import$(e,n){var t={}.hasOwnProperty;for(var a in n)if(t.call(n,a))e[a]=n[a];return e}<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"paragraph",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[]},init:function(t){var e,n,a,r,i,u,o,d;e=t.root,n=t.context,a=t.data,r=t.pubsub;i={default:a["default"]||"",data:a["default"]||""};u=n.ldview,o=n.ldcover;r.fire("init",{get:function(){return i.data||""},set:function(t){i.data=t||"";return d.render()},default:function(){return i["default"]},meta:function(t){return i["default"]=t["default"]}});return d=new u({root:e,init:{ldcv:function(t){var e;e=t.node;return i.ldcv=new o({root:e})}},handler:{panel:function(t){var e;e=t.node},input:function(t){var e;e=t.node;return e.value=i.data||""},textarea:function(t){var e;e=t.node;return e.value=i.data||""}},action:{click:{input:function(t){var e,n,a;e=t.node;n=d.get("input").getBoundingClientRect();a=d.get("panel").getBoundingClientRect();import$(d.get("panel").style,{width:n.width+"px",left:n.left+"px",top:n.top+"px"});return i.ldcv.get().then(function(t){var e;if(t!=="ok"){return}e=d.get("textarea").value;if(i.data!==e){r.fire("event","change",e)}i.data=e;return d.render()})}}}})}};function import$(t,e){var n={}.hasOwnProperty;for(var a in e)if(n.call(e,a))t[a]=e[a];return t}<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"popup",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[],i18n:{"zh-TW":{config:"設定"}}},init:function(t){var n,e,r,o,u,i,a,f,p,c,d;n=t.root,e=t.context,r=t.data,o=t.pubsub,u=t.t;i={};a=function(t){var n;if(!t){return null}else if(n=t.data){return n}else{return t}};f=function(t){var n;i.text=(n=t&&t.text)?n:typeof t==="string"?t+"":u("config");return d.render("button")};p=e.ldview,c=e.ldcolor;o.fire("init",{get:function(){return r.popup.data()},set:function(t){r.popup.data(t);return f(r.popup.data())}});return d=new p({root:n,action:{click:{button:function(){return r.popup.get().then(function(t){o.fire("event","change",a(t));return f(t)})}}},text:{button:function(){var t;if(t=i.text){return t}else{return u("config")}}}})}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"quantity",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[{name:"ldslider",version:"main",path:"index.min.css"},{name:"ldslider",version:"main",path:"index.min.js"}],i18n:{en:{unit:"Unit"},"zh-TW":{unit:"單位"}}},init:function(n){var t,e,i,r,u,a,o,l,d,f,s,c=this;t=n.root,e=n.context,i=n.data,r=n.pubsub;u=e.ldview,a=e.ldslider;o={};this._meta={};l=function(n){var t;n==null&&(n={});t=o.ldrs.get()+""+o.unit;if(!n.init&&t!==o.v){r.fire("event","change",t)}return o.v=t};d=function(n){var t,e;n==null&&(n={});t=import$({},n.unit);o.unit=t.name;if(t.from!=null){console.warn("[@plotdb/konfig] ctrl should use `default` for default value.\\nplease update your config to comply with it.")}if(t["default"]!=null){t.from=t["default"]}o.ldrs.setConfig((e=Object.fromEntries(["min","max","step","from","to","exp","limitMax","range","label"].map(function(n){return[n,t[n]]}).filter(function(n){return n[1]!=null})),e.unit=t.name||"",e));l({init:n.init});return s.render()};f=function(n){var t;n==null&&(n={});c._meta=t=JSON.parse(JSON.stringify(n.meta||{}));return d({unit:t.units[0],init:n.init})};r.fire("init",{get:function(){return o.ldrs.get()+""+o.unit},set:function(n){var t;t=/^(\\d+(?:\\.(\\d+))?)(\\D*)/.exec(n+"");if(!t){t=/^(\\d+(?:\\.(\\d+))?)(\\D*)/.exec(this["default"]()+"")}if(!t){t=[0,0,this._meta.units[0]]}o.ldrs.set(+t[1]);return o.unit=t[2]},default:function(){return c._meta["default"]},meta:function(n){return f({meta:n})},render:function(){return o.ldrs.update()}});s=new u({root:t,initRender:false,action:{click:{switch:function(){return o.ldrs.edit()}}},init:{ldrs:function(n){var t;t=n.node;o.root=t;o.ldrs=new a({root:t});return o.ldrs.on("change",function(){return l()})}},text:{picked:function(){return o.unit}},handler:{unit:{list:function(){return c._meta.units},key:function(n){return n.name},action:{click:function(n){var t;t=n.data;return d({unit:t})}},text:function(n){var t;t=n.data;return t.name}}}});return s.init().then(function(){return f({meta:i,init:true})})}};function import$(n,t){var e={}.hasOwnProperty;for(var i in t)if(e.call(t,i))n[i]=t[i];return n}<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"size",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"master",path:"base"},dependencies:[{name:"ldslider",version:"main",path:"index.min.css"},{name:"ldslider",version:"main",path:"index.min.js"}],i18n:{en:{unit:"Unit"},"zh-TW":{unit:"單位"}}},init:function(t){var n,e,r,i,u,a,o,l,f,d,s=this;n=t.root,e=t.context,r=t.data,i=t.pubsub;u=e.ldview,a=e.ldslider;o={};this._meta={};l=function(n){var t;o.unit=n.name;if(n.from!=null){console.warn("[@plotdb/konfig] ctrl should use `default` for default value.\\nplease update your config to comply with it.")}if(n["default"]!=null){if(typeof n["default"]==="object"){import$(n,n["default"])}else if(typeof n["default"]==="number"){n.from=n["default"]}}o.ldrs.setConfig((t=Object.fromEntries(["min","max","step","from","to","exp","limitMax","range","label"].map(function(t){return[t,n[t]]}).filter(function(t){return t[1]!=null})),t.unit=n.name||"",t));return d.render()};f=function(t){s._meta=JSON.parse(JSON.stringify(t));return l(t.units[0])};i.fire("init",{get:function(){return{value:o.ldrs.get(),unit:o.unit}},set:function(t){if(typeof o){o.ldrs.set(t.value);return o.unit=t.unit}else{o.ldrs.set(t);return o.unit=(s._meta["default"]||{}).unit||s._meta.units[0].name}},default:function(){return s._meta["default"]},meta:function(t){return f(t)},render:function(){return o.ldrs.update()}});d=new u({root:n,initRender:false,action:{click:{switch:function(){return o.ldrs.edit()}}},init:{ldrs:function(t){var n;n=t.node;o.root=n;o.ldrs=new a({root:n});return o.ldrs.on("change",function(t){return i.fire("event","change",t)})}},text:{picked:function(){return o.unit}},handler:{unit:{list:function(){return s._meta.units},key:function(t){return t.name},action:{click:function(t){var n;n=t.data;return l(n)}},text:function(t){var n;n=t.data;return n.name}}}});return d.init().then(function(){return f(r)})}};function import$(t,n){var e={}.hasOwnProperty;for(var r in n)if(e.call(n,r))t[r]=n[r];return t}<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"text",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[]},init:function(e){var t,n,u,i,a,r,o=this;t=e.root,n=e.context,u=e.data,i=e.pubsub;a=n.ldview;this._meta=u;i.fire("init",{get:function(){return r.get("input").value||""},set:function(e){return r.get("input").value=e||""},default:function(){return o._meta["default"]||""},meta:function(e){return o._meta=e}});return r=new a({root:t,init:{input:function(e){var t;t=e.node;return t.value=u["default"]||""}},action:{input:{input:function(e){var t;t=e.node;return i.fire("event","change",t.value)}},change:{input:function(e){var t;t=e.node;return i.fire("event","change",t.value)}}}})}};<\/script></div>'},{name:"@plotdb/konfig.widget.default",version:"main",path:"upload",code:'<div><script type="@plotdb/block">module.exports={pkg:{extend:{name:"@plotdb/konfig.widget.default",version:"main",path:"base"},dependencies:[]},init:function(t){var e,n,i,u,r,a,o=this;e=t.root,n=t.context,i=t.data,u=t.pubsub;r=n.ldview;this._meta=i;u.fire("init",{get:function(){return a.get("input").value||""},set:function(t){return a.get("input").value=t||""},default:function(){return[]},meta:function(t){return o._meta=t}});return a=new r({root:e,init:{input:function(t){var e;e=t.node;if(o._meta.multiple){return e.setAttribute("multiple",true)}}},action:{change:{input:function(t){var e;e=t.node;return u.fire("event","change",e.files)}}}})}};<\/script></div>'}])}();
