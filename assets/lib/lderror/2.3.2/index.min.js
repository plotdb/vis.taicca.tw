!function(){var o,i;function s(r,e){var t,n={}.hasOwnProperty;for(t in e)n.call(e,t)&&(r[t]=e[t]);return r}o={0:"unknown lderror",998:"skipped",999:"canceled",1e3:"user not login",1001:"suspicious user",1002:"unknown error",1003:"image process failed",1004:"quota exceeded",1005:"csrftoken mismatch",1006:"timeout",1007:"server down",1008:"unable to parse user data",1009:"bot",1010:"captcha error",1011:"resource conflict",1012:"permission denied",1013:"expire",1014:"apply for a resource that already exists",1015:"bad parameter",1016:"feature not yet available",1017:"resource corrupted",1018:"no consent",1019:"wrong domain",1020:"not supported",1021:"email not verified",1022:"missing dependency",1023:"lderror testing",1024:"limited by throttling",1025:"runtime error",1026:"not applicable",1027:"missing config",1028:"resource unavailable",1029:"session data corrupted",1030:"password mismatched",1031:"weak password",1032:"credential scheme mismatched"},(i=function(r,e){var t,n;return null==r&&(r=""),null==e&&(e=0),this instanceof i?(t=(isNaN(+e)?0:+e)||r.id||0,"string"==typeof r?(this.message=r,this.id=t):r instanceof Error?(this.stack=r.stack,this.message=r.message,this.id=t):"object"==typeof r?(delete r.__proto__,delete r.constructor,s(this,r).id=t):"number"==typeof r&&(this.id=r,"string"==typeof e&&(this.message=e),this.message||(this.message=(n=o[this.id||0])?n:100<=this.id&&this.id<600?"http code: "+this.id:o[0]+" (id: "+(this.id||0)+")")),this.name=i.prototype.name,this.stack=(n=s(new Error,this)).stack,this.error=n,this):new i(r,e)}).prototype=s(Object.create(Error.prototype),{name:"lderror",toString:function(r){var e;return null==r&&(r={}),e=this.toObject(),null==r.stack||r.stack||delete e.stack,JSON.stringify(e)},toObject:function(){var r={name:this.name};return r.id=this.id,r.message=this.message,r.stack=this.stack,r}}),i.id=function(r){return"object"==typeof r&&"lderror"===r.name&&r.id?r.id:0},i.message=function(r){return"number"==typeof r?o[r]||o[0]:"object"==typeof r&&o[r.id]||o[0]},i.reject=function(r,e){return Promise.reject(new i(r,e))},i.handler=function(r){var o=this;return this.i=((r=null==r?{}:r).ignore||[]).concat([999]),this.h=r.handler,this.r=r.rule||function(r){return r},this.s={},(r=function(r){var e;if(!function(r,e){var t=-1,n=e.length>>>0;for(;++t<n;)if(r===e[t])return!0;return!1}(e=i.id(r),o.i)&&(o.s[e]=1,o.h(o.r(e),r).then(function(){return o.s[e]=0}),!e))throw console.log(r),r}).isOn=function(){var t,n;return!!function(){var r,e=[];for(t in r=this.s)n=r[t],e.push(n);return e}.call(o).filter(function(r){return r}).length},r},i.eventHandler={error:function(r){return!(!r.error||"lderror"!==r.error.name||!r.error.error||r.error===r.error.error)&&(console.warn("uncaught lderror",r.error),console.warn("with its internal Error object thrown:"),r.preventDefault(),setTimeout(function(){throw r.error.error},0),!0)},rejection:function(r){if(r.reason&&"lderror"===r.reason.name&&r.reason.error)throw console.warn("Unhandled rejection with lderror:",r.reason),console.warn("with its internal Error object thrown:"),r.reason.error;return!1}},"undefined"!=typeof module&&null!==module?module.exports=i:"undefined"!=typeof window&&null!==window&&(window.lderror=i)}.call(this);
